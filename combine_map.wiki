= 组合映射 =

对于数组操作的map,显然其复杂度都是O(N)的.而之类的操作,一般也不可能降低到O(N)之下,因为至少要进行读取所有数组一遍吧.

那么对于组合map的算法呢,一般可以利用其更新机制,使得其算法的复杂度保持在O(N)而不上升,这是一个非常常见的技巧.

例如:均值滤波算法.也就是对于数组,求其a[i-r,i+r]的平均值.

这种问题,就可以通过计算其cumsum(累积和),然后就可以计算出sum(a[i-r],a[i+r])=cumsum(i+r)-cumsum(i-r-1).

但是这种算法不具有推广特性.

事实上,我们还可以看到.sum(a[i-r,i+r]) = sum(a[i-r-1,a[i+r-1]) +a[i+r] -a[i-r-1]

也就是 sum'(i) = sum'(i-1) + a[i+r] - a[i-r-1]

这就是范围和的更新(迭代)结构.利用这种方法,就是复用之前的计算结果,将其更新即可.

== 推广 ==
对于下列的问题,也可以类似解决.

* 中值滤波(通过更新直方图,也就是r半径范围内的统计信息,即可)
* 最大不重复子数列长度(更新之前累积数列内容的集合)

而且这种方式,不仅仅适用于一维数组,还可以推广到多维数组上进行.只需要分别在各个维度运算一遍即可.


